<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .form,
        .greeting {
            display: none;
        }
        .showing {
            display: block;
        }
    </style>
</head>

<body>
    <form class="js-form form">
        <input type="text" placeholder="What is your name?">
    </form>
    <h4 class="js-greetings greetings"></h4>
    <script>
        const form = document.querySelector('.js-form');
        const input = form.querySelector('input');
        const greeting = document.querySelector('.js-greetings');
        const USER_LS = "currentUSer";
        const SHOWING_CN = 'showing';

        init();

        function saveName() {
            localStorage.setItem(USER_LS, text);
        }

        function handleSubmit(event) {
            event.preventDefault();
            const currentValue = input.value;
            paintGreeting(currentValue);
            saveName(currentValue);
        }

        function askForName() {
            form.classList.add(SHOWING_CN);
            form.addEventListener("submit", handleSubmit)
        }

        function paintGreeting(text) {
            form.classList.remove(SHOWING_CN);
            console.log(form.classList);
            greeting.classList.add(SHOWING_CN);
            greeting.innerText = `hello ${text}`;
        }

        function loadName() {
            const currentUser = localStorage.getItem(USER_LS);
            if (currentUser === null) {
                askForName();
            } else {
                paintGreeting(currentUser)
            }
        }

        function init() {
            loadName();
        }
    </script>
</body>

</html>